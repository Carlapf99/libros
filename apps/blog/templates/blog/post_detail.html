{% extends 'base.html' %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<article class="post-detail">
  <h1>{{ post.title }}</h1>
  <div class="lead">{{ post.content|linebreaks }}</div>
</article>

<section class="comments-layout">
  <section class="comments-section">
    <h2>Comentarios</h2>
    {% for comment in comments %}
      <article class="card comment-card">
        <h3>{{ comment.name }}</h3>
        <p>{{ comment.body|linebreaks }}</p>
        <small>{{ comment.created_at|date:'d/m/Y H:i' }}</small>
      </article>
    {% empty %}
      <p>Este artículo aún no tiene comentarios aprobados.</p>
    {% endfor %}
  </section>

  <aside class="card comment-form-card">
    <h2>Deja tu comentario</h2>
    <form method="post" class="form-grid compact-form">
      {% csrf_token %}
      {{ form.honeypot }}
      {{ form.as_p }}
      <button class="btn" type="submit">Enviar comentario</button>
    </form>
    <p class="muted">Sin email: solo nombre y comentario. Se revisan antes de publicarse.</p>
  </aside>
</section>
{% endblock %}
